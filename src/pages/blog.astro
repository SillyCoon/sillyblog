---
import Layout from '../layouts/Layout.astro';
import { groupPostsByCycles } from '../utils/posts';
import Cycle from '../components/Cycle.astro';

const rawPosts = await Astro.glob('./posts/*.mdx');

const cycles = groupPostsByCycles(rawPosts).toArray();
---

<Layout title="Blog">
  {cycles.map(([name, posts]) => <Cycle name={name} posts={posts} />)}
</Layout>
